#include "game.h"

int main() {
    // 1. Initialization
    srand(time(0));

    // 2. Define the game map (temple)
    char temple[Size][Size] = {
        {'#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#'}, 
        {'#','.','.','.','.','.','.','.','.','.','?','.','.','#','.','.','.','?','.','#'},   
        {'#','.','#','#','#','O','.','#','.','.','.','.','.','#','.','O','.','.','.','#'},   
        {'#','.','#','?','#','.','.','#','.','.','.','.','.','#','.','.','.','.','.','#'},   
        {'#','.','#','.','O','.','.','.','.','.','?','.','.','#','#','#','#','#','.','#'},   
        {'#','.','#','.','#','.','.','.','.','.','.','.','.','.','.','.','.','.','#','#'},   
        {'#','.','#','#','#','.','.','.','.','.','.','#','.','.','.','?','.','.','.','#'},
        {'#','.','.','.','.','.','#','O','#','.','.','#','.','.','.','.','.','.','#','#'},   
        {'#','.','#','.','.','.','.','.','.','.','?','.','.','.','.','.','.','.','#','#'},
        {'#','#','#','.','.','?','.','.','.','.','.','.','.','#','#','.','.','.','.','#'},
        {'#','.','#','.','.','.','.','.','.','.','.','.','.','#','.','.','.','?','.','#'},   
        {'#','.','#','#','#','?','.','#','.','.','.','#','.','#','.','.','.','.','.','#'},
        {'#','.','.','.','.','.','#','.','.','.','.','#','.','.','.','.','#','#','.','#'},   
        {'#','.','#','?','.','.','.','.','.','.','.','.','.','?','.','.','.','.','.','#'},
        {'#','.','#','.','.','.','.','#','.','.','.','.','#','.','.','.','.','.','#','#'},   
        {'#','.','.','.','?','.','.','.','O','.','.','.','#','.','.','.','?','.','.','#'},   
        {'#','#','#','O','#','.','#','.','.','.','?','.','.','.','.','#','.','.','.','#'},
        {'#','.','.','.','#','.','.','.','.','#','.','.','.','?','.','.','.','?','#','#'},   
        {'#','.','?','.','#','.','.','#','.','?','.','.','.','.','.','.','.','.','.','#'},
        {'#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#'}
    };
    
    // Set player's initial position on the map using global coordinates
    temple[playerRow][playerCol] = '@';

    // 3. Display Instructions and Start Timer
    print_Instructions();
    startTime = GetTickCount();

    // 4. Main Game Loop
    while (!gameOver) {
        // Print the temple and get remaining time
        int remainingTime = print_Temple(temple);

        // Check for time limit failure
        if (remainingTime <= 0) {
            printf("\nâ³ Time's up! The temple collapses!\n");
            gameOver = 1;
            break;
        }

        // Get user input and execute move
        Input_User(temple); 
    }
    
    // Print final state after game over
    print_Temple(temple);
    
    return 0;
}